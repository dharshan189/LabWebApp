<!DOCTYPE html>
<html>
<head>
    <title>Patient - Apply Token</title>
    <style>
        body { font-family:'Segoe UI',sans-serif; background:#97f194ff; display:flex; justify-content:center; align-items:center; min-height:100vh;}
        .form-box { background:#a1cfddff; padding:40px; border-radius:12px; width:500px; box-shadow:0 8px 20px rgba(0,0,0,0.2); position:relative;}
        h2 {text-align:center;}
        label {font-weight:bold;}
        input, select, button { width:100%; padding:12px; margin:10px 0; border-radius:6px; border:1px solid #ccc; box-sizing: border-box;}
        button { background:#2f3131ff; color:white; border:none; cursor:pointer; font-weight:bold;}
        button:hover { background:#555;}
        .view-reports, .logout { position:absolute; top:10px; background:#2f3131ff; color:white; text-decoration:none; padding:8px 15px; border-radius:4px; font-size:14px;}
        .view-reports:hover, .logout:hover { background:#444;}
        .view-reports { right:120px; }
        .logout { right:10px; }
    </style>
</head>
<body>
    <div class="form-box">
        <a href="/patient?pid={{PID}}&viewreports=true" class="view-reports">View Reports</a>
        <a href="/" class="logout">Logout</a>
        <h2>Apply for Lab Token</h2>
        <form method="post" action="/patient" enctype="multipart/form-data">
            <input type="hidden" name="pid" value="{{PID}}">
            
            <label>Name of the Patient</label>
            <input type="text" name="name" required oninput="this.value=this.value.replace(/[^a-zA-Z\s]/g,'')" placeholder="Enter patient name">
            
            <label>Test Type</label>
            <select name="test" required>
                <option value="" disabled selected>Select Test</option>
                <option>Blood Test</option>
                <option>Liver Function Test</option>
                <option>ECG</option>
                <option>MRI Scan</option>
            </select>
            
            <label>Preferred Date</label>
            <input type="date" name="booking_date" required>
            
            <label>Mobile No</label>
            <input type="text" name="mobile" maxlength="10" required placeholder="Enter 10-digit mobile number" pattern="[6-9][0-9]{9}" title="Enter valid 10-digit number">
            
            <label>Blood Group</label>
            <select name="blood" required>
                <option value="" disabled selected>Select Blood Group</option>
                <option>A+</option><option>B+</option><option>O+</option><option>AB+</option>
                <option>A-</option><option>B-</option><option>O-</option><option>AB-</option>
            </select>
            
            <label>Place</label>
            <input type="text" name="place" required oninput="this.value=this.value.replace(/[^a-zA-Z\s]/g,'')" placeholder="Enter place">
            
            <label>Prescription (Image)</label>
            <input type="file" name="prescription" accept="image/*" required>
            
            <button type="submit">Apply</button>
        </form>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var dateInput = document.querySelector('input[name="booking_date"]');
            var today = new Date().toISOString().split('T')[0];
            dateInput.setAttribute('min', today);
        });
    </script>
</body>
</html>